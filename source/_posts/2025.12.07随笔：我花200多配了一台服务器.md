---
title: 2025.12.07随笔：我花200多配了一台服务器
date: 2025-12-07
categories:
  - 随笔
---
# 2025.12.07随笔：我花200多配了一台服务器
| **部件**   | **详情**                        | **价格 (RMB)**   |
| ---------- | ------------------------------- | ---------------- |
| **主板**   | 拆机技嘉 H61 (LGA1155)          | ¥43.35           |
| **CPU**    | i3-3220 (双核四线程)            | ¥23.15           |
| **内存**   | DDR3 4G 台式机内存条 $\times 2$ | ¥17.9 $\times 2$ |
| **电源**   | 长城/航嘉等 额定 350W           | ¥52              |
| **散热**   | 玄冰 100 CPU 散热器             | ¥8.91            |
| **系统盘** | 120GB 固态硬盘 (SSD)            | ¥37              |
| **机箱**   | CPU 散热器 1150 电脑台式机箱主  | ¥8.91            |
| **电源线** | 1.5m 电源线                     | ¥3               |
|            |                                 |                  |

共计200多，装好后安装Ubunu 24桌面版，用笔记本分享网络给服务器，使用远程连接控制服务器

![image-20251207002631162](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251207002631162.png)

同时使用`vscode`里面的`remote-ssh`用于平时部署代码

![image-20251207002734414](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251207002734414.png)

后续：在服务器上部署了我之前写的boost-seacher项目

![image-20251207011034054](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251207011034054.png)

![](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251207011034054.png)

---

## 后续

从十多年前的我姐的电脑里面拆出来了一块320G的机械硬盘，一看还是菲律宾制造，好家伙。打算用这个硬盘一些东西，当一个文件管理服务器就行了，这配置也不指望它跑大型服务了。

目标是让 **Windows 客户端**能够对 Ubuntu 服务器机械硬盘上的共享文件夹进行**完全读写**访问，从而将这台 200 元的服务器变成一个可靠的家庭文件中心。

使用 Ubuntu 桌面版最便捷的 **Nautilus 文件管理器**内置的“本地网络共享”功能，快速建立了 Samba 共享。在 Nautilus 中，只需右键点击目标文件夹，进入属性，选择本地网络共享，并勾选分享，就完成了初始设置。

但Windows 客户端反复提示 **“文件访问被拒绝”** 或 **“你需要 Unix User\wq 提供的权限才能对此文件进行更改”**。

问题根源在于机械硬盘使用了 **NTFS/VFAT** 等非 Linux 原生文件系统。在 Linux 中，这些文件系统的权限（如 `umask`、`fmask` 等）在**磁盘挂载时**由内核决定，导致用户空间运行的 `chown` 或 `chmod` 命令**无法改变底层权限**。这是所有权限冲突的核心原因。我们尝试了复杂的 `umask=000` 重新挂载等方法，也未能解决这种底层冲突。

既然所有软件层的权限修复都失败了，我们采用了最彻底的方法：**格式化硬盘，并使用 Linux 原生文件系统 Ext4 重新分区。**

1. **卸载所有分区：** 首先，必须使用 `sudo umount /dev/sdbX` 命令将机械硬盘上的所有分区全部卸载。
2. **格式化：** 使用 `sudo mkfs.ext4 /dev/sdb1` 将主分区格式化为 **Ext4**。
3. **挂载与设置永久权限：** 重新挂载到新的目录（例如 `/data_share`）后，Ext4 文件系统完美支持 Linux 的权限控制。
   - 我们使用 `sudo chown -R wq:wq /data_share` 设置所有权。
   - 使用 `sudo chmod -R 775 /data_share` 设置了完全的读写权限，且该权限将永久生效。

Ext4 文件系统彻底消除了 Samba 的权限障碍。Windows 客户端现在只需使用 **Ubuntu 登录用户名和密码**（即 `wq` 和对应密码）登录，就可以对共享文件夹进行可靠的读写和删除操作。这台服务器终于实现了其作为家庭数据中心的全部功能。

![image-20251209204650019](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251209204650019.png)

![image-20251209204446281](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251209204446281.png)

用来存东西或者从`tel`下载电影还挺方便的，机械硬盘的读写速度用来看电视也刚刚好，就是你在网上它下东西的时候你不能干其他影响网络的事情，比如刷抖音，打游戏都不可以，并且一次只能下一部，如果多部并发会有一部下不下来，还挺烦的

![image-20251209234809160](https://raw.githubusercontent.com/QinMou000/pic/main/image-20251209234809160.png)